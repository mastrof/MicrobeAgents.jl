<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · MicrobeAgents.jl</title><meta name="title" content="Introduction · MicrobeAgents.jl"/><meta property="og:title" content="Introduction · MicrobeAgents.jl"/><meta property="twitter:title" content="Introduction · MicrobeAgents.jl"/><meta name="description" content="Documentation for MicrobeAgents.jl."/><meta property="og:description" content="Documentation for MicrobeAgents.jl."/><meta property="twitter:description" content="Documentation for MicrobeAgents.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MicrobeAgents.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#Structure"><span>Structure</span></a></li><li><a class="tocitem" href="#Space"><span>Space</span></a></li><li><a class="tocitem" href="#Microbes"><span>Microbes</span></a></li><li><a class="tocitem" href="#More-about-models"><span>More about models</span></a></li><li><a class="tocitem" href="#Running-a-model"><span>Running a model</span></a></li><li><a class="tocitem" href="#Motility-patterns"><span>Motility patterns</span></a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Random walks</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/RandomWalks/1_randomwalk1D/">1D Random walk</a></li><li><a class="tocitem" href="../examples/RandomWalks/2_randomwalk2D_motilepatterns/">2D Random walk and motile patterns</a></li><li><a class="tocitem" href="../examples/RandomWalks/3_randomwalk3D/">3D Random walk</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Chemotaxis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/Chemotaxis/1_linear_ramp/">Linear concentration ramp</a></li><li><a class="tocitem" href="../examples/Chemotaxis/2_celani_gauss2D/">Noisy chemotaxis towards Gaussian source</a></li><li><a class="tocitem" href="../examples/Chemotaxis/3_xie_response-function/">Response function (Xie)</a></li><li><a class="tocitem" href="../examples/Chemotaxis/4_response_functions/">Comparison of chemotactic response functions</a></li><li><a class="tocitem" href="../examples/Chemotaxis/5_drift_exponential/">Chemotactic drift in exponential ramp with noisy sensing</a></li></ul></li></ul></li><li><span class="tocitem">Validation</span><ul><li><a class="tocitem" href="../validation/msd_runtumble/">Mean squared displacement</a></li><li><a class="tocitem" href="../validation/run_distribution/">Run-length distribution</a></li><li><a class="tocitem" href="../validation/velocity_autocorrelations/">Velocity autocorrelation functions</a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mastrof/MicrobeAgents.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/mastrof/MicrobeAgents.jl/blob/main/docs/src/introduction.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h1><h2 id="Structure"><a class="docs-heading-anchor" href="#Structure">Structure</a><a id="Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Structure" title="Permalink"></a></h2><p>An <code>AgentBasedModel</code> object embeds all the properties of the system to be simulated and maps unique IDs to microbe instances. During the simulation, the model is evolved in discrete time steps, with each microbe&#39;s position, velocity and &quot;state&quot; being updated according to specified rules. Standard rules for motion, reorientations and chemotaxis are available by default, but custom behaviors can be implemented via user-defined functions.</p><p>The typical workflow to run a simulation in MicrobeAgents.jl goes as follows:</p><ol><li>Define the size and properties of the space in which the microbes will move.</li><li>Choose an appropriate microbe type to represent the desired behavior, or define a new one.</li><li>Initialize an <code>AgentBasedModel</code> object with the desired space, microbe type, integration timestep, and any extra property needed for the simulation.</li><li>Populate the ABM with microbe instances.</li><li>Choose the observables to collect during production and run the model.</li></ol><p>MicrobeAgents.jl re-exports and extends various function from Agents.jl in order to work as a standalone, but it is generally recommended to use it in combination with Agents.jl for extra goodies.</p><h2 id="Space"><a class="docs-heading-anchor" href="#Space">Space</a><a id="Space-1"></a><a class="docs-heading-anchor-permalink" href="#Space" title="Permalink"></a></h2><p>MicrobAgents.jl only supports continuous spaces with dimensions 1, 2 or 3. Spaces can be created with the <code>ContinuousSpace</code> function (reexported from Agents.jl). The extent of the space must be given as a tuple or <code>SVector</code>, and periodicity is set with the <code>periodic</code> kwarg (defaults to true).</p><pre><code class="nohighlight hljs"># one-dimensional periodic space
extent = (1.0,)
ContinuousSpace(extent)

# two-dimensional non-periodic space
extent = (1.0, 2.0)
ContinuousSpace(extent; periodic=false)

# three-dimensional space periodic only along the x direction
extent = (100.0, 20.0, 20.0)
ContinuousSpace(extent; periodic=(true,false,false))</code></pre><h2 id="Microbes"><a class="docs-heading-anchor" href="#Microbes">Microbes</a><a id="Microbes-1"></a><a class="docs-heading-anchor-permalink" href="#Microbes" title="Permalink"></a></h2><p>Microbes are represented by subtypes of the <code>AbstractMicrobe</code> type, which is in turn a subtype of <code>AbstractAgent</code> from Agents.jl</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MicrobeAgents.AbstractMicrobe" href="#MicrobeAgents.AbstractMicrobe"><code>MicrobeAgents.AbstractMicrobe</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractMicrobe{D} &lt;: AbstractAgent where {D&lt;:Integer}</code></pre><p>All microbe types in MicrobeAgents.jl simulations must be instances of user-defined types that are subtypes of <code>AbstractMicrobe</code>.     YourMicrobeType{D} &lt;: AbstractMicrobe{D} The parameter <code>D</code> defines the dimensionality of the space in which the microbe type lives (1, 2 and 3 are supported).</p><p>All microbe types <em>must</em> have at least the following fields:</p><ul><li><code>id::Int</code> id of the microbe (used internally by Agents.jl)</li><li><code>pos::SVectpr{D,Float64}</code> position of the microbe</li><li><code>vel::SVector{D,Float64}</code> velocity of the microbe</li><li><code>motility::AbstractMotility</code> motile pattern of the microbe</li><li><code>turn_rate::Real</code> average reorientation rate of the microbe</li><li><code>rotational_diffusivity::Real</code> coefficient of brownian rotational diffusion</li><li><code>radius::Real</code> equivalent spherical radius of the microbe</li><li><code>state::Real</code> generic variable for a scalar internal state</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/MicrobeAgents.jl#L20-L37">source</a></section></article><p>MicrobeAgents provides different <code>AbstractMicrobe</code> subtypes representing different models of bacterial behavior from the scientific literature. The list of implemented models can be obtained with <code>subtypes(AbstractMicrobe)</code>.</p><p>A basic type, which is typically sufficient for simple motility simulations and does not include chemotaxis, is the <code>Microbe</code> type.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MicrobeAgents.Microbe" href="#MicrobeAgents.Microbe"><code>MicrobeAgents.Microbe</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Microbe{D,N} &lt;: AbstractMicrobe{D,N}</code></pre><p>Base microbe type for simple simulations. <code>D</code> is the space dimensionality and <code>N</code> is the number of states of the microbe&#39;s motility pattern.</p><p><code>Microbe</code> has the required fields</p><ul><li><code>id::Int</code> an identifier used internally</li><li><code>pos::SVector{D,Float64}</code> spatial position</li><li><code>vel::SVector{D,Float64}</code> unit velocity vector</li><li><code>speed::Float64</code> magnitude of the velocity vector</li><li><code>motility::Motility{N}</code> motility pattern</li></ul><p>and the default parameters</p><ul><li><code>rotational_diffusivity::Float64 = 0.0</code> coefficient of brownian rotational diffusion</li><li><code>radius::Float64 = 0.0</code> equivalent spherical radius of the microbe</li><li><code>state::Float64 = 0.0</code> generic variable for a scalar internal state</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/microbes.jl#L3-L20">source</a></section></article><p>Microbe instances should only be created within an <code>AgentBasedModel</code>, the fundamental structure which embeds everything that has to do with the agent-based simulations you want to run. In MicrobeAgents.jl, models are created through the <code>StandardABM</code> function.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Agents.StandardABM" href="#Agents.StandardABM"><code>Agents.StandardABM</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StandardABM(MicrobeType, space, timestep; kwargs...)</code></pre><p>Extension of the <code>Agents.StandardABM</code> method for microbe types. Implementation of <code>AgentBasedModel</code> where agents can be added and removed at any time. If agents removal is not required, it is recommended to use the keyword argument <code>container = Vector</code> for better performance. See <code>Agents.AgentBasedModel</code> for detailed information on the keyword arguments.</p><p><strong>Arguments</strong></p><ul><li><code>MicrobeType</code>: subtype of <code>AbstractMicrobe{D}</code>, with explicitly specified dimensionality <code>D</code>. A list of available options can be obtained by running <code>subtypes(AbstractMicrobe)</code>.</li><li><code>space</code>: a <code>ContinuousSpace{D}</code> with <em>the same</em> dimensionality <code>D</code> as MicrobeType which specifies the spatial properties of the simulation domain.</li><li><code>timestep</code>: the integration timestep of the simulation.</li></ul><p><strong>Keywords</strong></p><ul><li><code>properties</code>: additional container of data to specify model-level properties. MicrobeAgents.jl includes a set of default properties (detailed at the end).</li><li><code>scheduler = Schedulers.fastest</code></li><li><code>rng = Random.default_rng()</code></li><li><code>warn = true</code></li></ul><p><strong>Default <code>properties</code></strong></p><p>When a model is created, a default set of properties is included in the model (<code>MicrobeAgents.default_ABM_properties</code>):</p><pre><code class="nohighlight hljs">DEFAULT_ABM_PROPERTIES = Dict(
    :chemoattractant =&gt; GenericChemoattractant{D,Float64}()
    :affect! =&gt; chemotaxis!
)</code></pre><p>By including these default properties, we make sure that all the chemotaxis models will work even without extra user intervention. All these properties can be overwritten by simply passing an equivalent key to the <code>properties</code> dictionary when creating the model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/model.jl#L1-L34">source</a></section></article><p>To initialize a model we must provide the microbe type, the simulation space, and the integration timestep of the simulation. All other parameters are optional. To setup a model for <code>Microbe</code>s living in a 1-dimensional space we can therefore run</p><pre><code class="nohighlight hljs">space = ContinuousSpace((100.0,); periodic=false)
dt = 0.1
model = StandardABM(Microbe{1}, space, dt)</code></pre><p>Now, with the <code>add_agent!</code> function we will populate the model with microbes of the specified type (<code>Microbe{1}</code>). The only argument we must <em>always</em> specify for <code>add_agent!</code> is the motility of the microbe, via the <code>motility</code> keyword. An overview of the motility interface is given later; For now we will just use a Run-Tumble motility with an average run duration of 1 second and a constant swimming speed of 20 micron / second. The third required argument to the call is the distribution of reorientation angles, but it is irrelevant in 1-dimensional systems so we can just pass an empty array. If unspecified, position, direction and speed of the microbe will be assigned randomly; all the other fields will be assigned default values from the constructor (unless specified). To select a position, it can be passed as the first argument to the <code>add_agent!</code> call, and any other bacterial parameter can be defined via keyword arguments. All of the following are valid calls</p><pre><code class="nohighlight hljs">motility = RunTumble(1.0, [20.0], [])
# a Microbe with large radius
add_agent!(model; motility, radius=10.0)
# a Microbe with custom position and high coefficient of rotational diffusion
add_agent!((53.2,), model; motility, rotational_diffusivity=0.5)
# a Microbe initialized with velocity to the right
add_agent!(model; motility, vel=(1.0,))</code></pre><p>All the other subtypes of <code>AbstractMicrobe</code> work in a similar way, although they will have distinct default values and extra fields. When possible, default values are typically assigned following the original implementation in the literature.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MicrobeAgents.BrownBerg" href="#MicrobeAgents.BrownBerg"><code>MicrobeAgents.BrownBerg</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">BrownBerg{D} &lt;: AbstractMicrobe{D}</code></pre><p>Model of chemotactic E.coli from &#39;Brown and Berg (1974) PNAS&#39;</p><p>Default parameters:</p><ul><li><code>motility = RunTumble(0.67, [30.0], Isotropic(D), 0.1)</code></li><li><code>rotational_diffusivity = 0.035</code> rad²/s coefficient of brownian rotational diffusion</li><li><code>radius = 0.5</code> μm equivalent spherical radius of the microbe</li><li><code>state = 0.0</code> corresponds to &#39;weighted dPb/dt&#39; in the paper</li><li><code>gain = 660</code> s</li><li><code>receptor_binding_constant = 100</code> μM</li><li><code>memory = 1</code> s</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/chemotaxis/brown-berg.jl#L3-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MicrobeAgents.Brumley" href="#MicrobeAgents.Brumley"><code>MicrobeAgents.Brumley</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Brumley{D} &lt;: AbstractMicrobe{D}</code></pre><p>Model of chemotactic bacterium from &#39;Brumley et al. (2019) PNAS&#39;. The model is optimized for simulation of marine bacteria and accounts for the presence of (gaussian) sensing noise in the chemotactic pathway.</p><p>Default parameters:</p><ul><li><code>motility = RunReverseFlick(0.45, [46.5], 0.45, [46.5])</code></li><li><code>state = 0.0</code> → &#39;S&#39;</li><li><code>rotational_diffusivity = 0.035</code> rad²/s</li><li><code>memory = 1.3</code> s → &#39;τₘ&#39;</li><li><code>gain_receptor = 50.0</code> μM⁻¹ → &#39;κ&#39;</li><li><code>gain = 50.0</code> → &#39;Γ&#39;</li><li><code>chemotactic_precision = 6.0</code> → &#39;Π&#39;</li><li><code>radius = 0.5</code> μm → &#39;a&#39;</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/chemotaxis/brumley.jl#L3-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MicrobeAgents.Celani" href="#MicrobeAgents.Celani"><code>MicrobeAgents.Celani</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Celani{D} &lt;: AbstractMicrobe{D}</code></pre><p>Model of chemotactic bacterium using the response kernel from &#39;Celani and Vergassola (2010) PNAS&#39;, extracted from experiments on E. coli.</p><p>Sensing noise (not present in the original model) is customarily introduced through the molecular counting noise formula by Berg and Purcell, and can be tuned through a <code>chemotactic_precision</code> factor inspired by &#39;Brumley et al. (2019) PNAS&#39; (defaults to 0, i.e. no noise).</p><p>Default parameters:</p><ul><li>`motility = RunTumble(0.67, [30.0], Isotropic(D), 0.1)</li><li><code>state = 0</code></li><li><code>rotational_diffusivity = 0.26</code> rad²/s</li><li><code>gain = 50.0</code></li><li><code>memory = 1</code> s</li><li><code>radius = 0.5</code> μm</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/chemotaxis/celani.jl#L3-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MicrobeAgents.Xie" href="#MicrobeAgents.Xie"><code>MicrobeAgents.Xie</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Xie{D} &lt;: AbstractMicrobe{D}</code></pre><p>Model of chemotactic bacterium adapted from &#39;Xie et al. (2019) Biophys J&#39;. The model is developed based on experimental measurements of the chemotactic response function in the marine bacterium V. alginolyticus. The peculiarity of the model is the presence of distinct parameters for the forward and backward swimming states.</p><p>Sensing noise (not present in the original model) is customarily introduced through the molecular counting noise formula by Berg and Purcell, and can be tuned through a <code>chemotactic_precision</code> factor inspired by &#39;Brumley et al. (2019) PNAS&#39; (defaults to 0, i.e. no noise).</p><p>Default parameters:</p><ul><li><code>motility</code></li><li><code>turn_rate_forward = 2.3</code> Hz</li><li><code>turn_rate_backward = 1.9</code> Hz</li><li><code>state = 0.0</code> s</li><li><code>state_m = 0.0</code> s</li><li><code>state_z = 0.0</code> s</li><li><code>rotational_diffusivity = 0.26</code> rad²/s</li><li><code>adaptation_time_m = 1.29</code> s</li><li><code>adaptation_time_z = 0.28</code> s</li><li><code>gain_forward = 2.7</code> 1/s</li><li><code>gain_backward = 1.6</code> 1/s</li><li><code>binding_affinity = 0.39</code> μM</li><li><code>chemotactic_precision = 0.0</code></li><li><code>radius = 0.5</code> μm</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/chemotaxis/xie.jl#L3-L31">source</a></section></article><h2 id="More-about-models"><a class="docs-heading-anchor" href="#More-about-models">More about models</a><a id="More-about-models-1"></a><a class="docs-heading-anchor-permalink" href="#More-about-models" title="Permalink"></a></h2><p>MicrobeAgents.jl exploits the <code>AgentBasedModel</code> interface from Agents.jl. While the standard Agents.jl syntax will always work, it is typically more convenient to use the method extensions provided by MicrobeAgents.jl, which also includes some default parameters required by the simulations. If the simulation requires removal/addition of microbes, it is recommended to call <code>StandardABM</code> with the <code>container=Dict</code> keyword argument, otherwise MicrobeAgents.jl defaults to <code>container=Vector</code> which provides better performance.</p><p>In addition to the microbe instances, the model should also wrap all the other information required to perform the simulation.</p><p>MicrobeAgents.jl defines default timestepping functions which are used to evolve the microbes and the model, and are accessible through the <code>microbe_step!</code> and <code>model_step!</code> keywords in <code>StandardABM</code>. By default, the <code>microbe_step!</code> function performs, in order:</p><ul><li>update microbe position according to current velocity</li><li>randomize the microbe orientation through rotational diffusion (if present)</li><li>update internal state of the microbe (e.g. chemotaxis or other user-defined behavior)</li><li>perform reorientation events following Poissonian statistics</li></ul><p>The <code>model_step!</code> function instead defaults to a dummy function which does nothing. Any custom behavior can be implemented by simply modifying these two functions.</p><p>Any type of external parameter that should be used during the simulation should be passed to <code>StandardABM</code> through the <code>properties</code> dictionary.</p><h2 id="Running-a-model"><a class="docs-heading-anchor" href="#Running-a-model">Running a model</a><a id="Running-a-model-1"></a><a class="docs-heading-anchor-permalink" href="#Running-a-model" title="Permalink"></a></h2><p>After the model has been created and populated with the desired number of microbes, we are ready to run the simulation. We just need to specify how many steps we want to simulate and what data to collect during the run:</p><pre><code class="nohighlight hljs">nsteps = 100
adf, mdf = run!(model, nsteps; adata=[position])</code></pre><p><code>run!</code> will return two dataframes, one for the agent-level data (<code>adf</code>) and one for the model-level data (<code>mdf</code>, which in this case will be empty). This way, we have produced our first random walk. Since <code>adf.position</code> is a vector of static vectors, we first have to unpack the x and y values and then we are ready to plot our trajectory.</p><pre><code class="nohighlight hljs">using Plots
x = first.(adf.position)
y = last.(adf.position)
plot(x, y)</code></pre><h2 id="Motility-patterns"><a class="docs-heading-anchor" href="#Motility-patterns">Motility patterns</a><a id="Motility-patterns-1"></a><a class="docs-heading-anchor-permalink" href="#Motility-patterns" title="Permalink"></a></h2><p>In MicrobeAgents.jl, motility patterns are represented through the <code>Motility{N}</code> type. A <code>Motility</code> is composed of <code>N</code> instances of <code>MotileState</code> and of a set of transition probabilities between these <code>N</code> states. A <code>MotileState</code> contains information about the speed distribution, turn angle distributions, and average lifetime of a particular state of motion.</p><p>There are two kinds of <code>MotileState</code>s, <code>RunState</code> and <code>TurnState</code>. A <code>RunState</code> is used to represent states associated with translational motion and no angular reorientation (e.g. <code>Run</code>). A <code>TurnState</code> is instead used to represent states where no translational motion happens, but where reorientations may occur (e.g. <code>Tumble</code>, <code>Reverse</code>, <code>Flick</code>, <code>Stop</code>).</p><p>Instances of <code>MotileState</code>s can be arbitrarily combined into a <code>Motility</code>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MicrobeAgents.Motility" href="#MicrobeAgents.Motility"><code>MicrobeAgents.Motility</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Motility(motile_states::NTuple{N,MotileState}, rates...)</code></pre><p>Construct a <code>Motility</code> from a sequence of <code>MotileState</code>s and their transition <code>rates</code>.</p><p><code>motile_states</code> must be a tuple of <code>MotileState</code> instances. <code>rates</code> must be specified in the form <code>(i =&gt; j, p)</code> where <code>i</code> is the index of the starting state (as ordered in the <code>motile_states</code> tuple), <code>j</code> is the index of the state towards which the transition occurs, and <code>p</code> is the probability that, after the duration of <code>i</code> is over, the transition occurs towards the state <code>j</code>. It is not necessary to indicate impossible transitions; any pair <code>i =&gt; j</code> which is not explicitly specified is assumed to have a transition probability <code>p=0</code>.</p><p>For example, if we want to define a 3-state motility, composed by a slow but long run, an instantaneous tumble with some <code>angle_pdf</code>, and a fast but short run, where the two runs can only transition towards the tumble, but the tumble can transition with probability 30% towards the slow run and 70% towards the fast run, we will call:</p><pre><code class="nohighlight hljs">Motility((Run(10.0, 2.0), Tumble(0.0, angle_pdf), Run(60.0, 0.5)),
    (1 =&gt; 2, 1.0),
    (2 =&gt; 1, 0.3), (2 =&gt; 3, 0.7),
    (3 =&gt; 2, 1.0)
)</code></pre><p>Some default constructors for common motility patterns are provided: <code>RunTumble</code>, <code>RunReverse</code>, <code>RunReverseFlick</code>, <code>RunStop</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/motility.jl#L48-L77">source</a></section></article><p>The most common motility patterns are, however, pre-implemented.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MicrobeAgents.RunTumble" href="#MicrobeAgents.RunTumble"><code>MicrobeAgents.RunTumble</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RunTumble(run_speed, run_duration, angle; tumble_duration=0.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/motility.jl#L93-L95">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MicrobeAgents.RunReverse" href="#MicrobeAgents.RunReverse"><code>MicrobeAgents.RunReverse</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RunReverse(
    run_speed_forward, run_duration_forward,
    run_speed_backward, run_duration_backward;
    angle=(π,), reverse_duration=0.0,</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/motility.jl#L111-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MicrobeAgents.RunReverseFlick" href="#MicrobeAgents.RunReverseFlick"><code>MicrobeAgents.RunReverseFlick</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RunReverseFlick(
    run_speed_forward, run_duration_forward,
    run_speed_backward, run_duration_backward;
    reverse_angle=(π,) flick_angle=(-π/2, +π/2),
    reverse_duration=0.0, flick_duration=0.0,
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/motility.jl#L142-L149">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MicrobeAgents.RunStop" href="#MicrobeAgents.RunStop"><code>MicrobeAgents.RunStop</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RunStop(run_speed, run_duration, stop_duration)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mastrof/MicrobeAgents.jl/blob/af1defee705f85d9be49e8ccf12c1bdb8a8aae8e/src/motility.jl#L176-L178">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../examples/RandomWalks/1_randomwalk1D/">1D Random walk »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Sunday 5 January 2025 23:24">Sunday 5 January 2025</span>. Using Julia version 1.10.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
